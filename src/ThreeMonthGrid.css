/* wrapper */
.three-month-grid {
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
}

/* container grid */
.grid-container {
  display: grid;
  /* grid-template-columns défini inline en JSX */
  grid-auto-rows: 24px;
}

/* cellules génériques */
.cell {
  box-sizing: border-box;
  border: 1px solid #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* colonne de gauche */
.left {
  position: sticky;
  left: 0;
  background: #fafafa;
  z-index: 5;
  /* Largeur définie par grid-template-columns en JSX. */
  /* Retirer les largeurs fixes ici permettrait à l'élément de s'adapter si la colonne grid le permet. */
  width: auto;
  min-width: auto;
  border-right: 1px solid #ccc;
}

/* en-têtes */
.header {
  background: #f1f1f1;
  font-weight: bold;
}
.month { grid-row: 1; }
.week  { grid-row: 2; }
.day   { grid-row: 3; }

.left.projet { grid-row: 4; }
.left.lot    { grid-row: 5; }
.left.intervention-label { grid-row: 6; }

/* lignes vides */
.empty {
  background: #fff;
}

/* Colonnes jours fériés / vacances */
/* Test de spécificité : Assurez-vous que la classe .holiday-vacation est bien sur les ÉLÉMENTS CELLULES. */
/* Ce sélecteur est plus spécifique. Si cela fonctionne, une autre règle surchargeait la version simple. */
.grid-container .cell.holiday-vacation {
  background: #c01a1a !important; /* Votre couleur rouge actuelle, avec !important pour forcer la priorité */
  /* Si cela ne fonctionne TOUJOURS PAS, la classe .holiday-vacation n'est PROBABLEMENT PAS sur les éléments HTML, */
  /* ou le fichier CSS n'est pas correctement chargé/appliqué. VÉRIFIEZ AVEC L'INSPECTEUR. */
}

/* intervention */
.intervention {
  color: #fff;
  font-size: 9px;
  cursor: move;
  overflow: visible; /* Permet au texte de dépasser */
  text-overflow: clip; /* S'assure que text-overflow n'agit pas */
  position: relative;
  z-index: 2;
}
/* ThreeMonthGrid.css ou votre fichier CSS global */

/* Cacher les poignées de lien par défaut */
.intervention-block-td .link-handle {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out, visibility 0s linear 0.2s; /* Transition pour opacity, changement direct pour visibility */
  pointer-events: none; /* Empêche l'interaction lorsque caché */
}

/* Afficher les poignées au survol de la barre d'intervention parente */
.intervention-block-td:hover .link-handle {
  visibility: visible;
  opacity: 1;
  transition-delay: 0s; /* Annule le délai pour la transition de visibility */
  pointer-events: auto; /* Permet l'interaction lorsque visible */
}

/* Classe à ajouter au conteneur de la grille lorsque isLinking est true */
.grid-is-linking .intervention-block-td .link-handle {
  visibility: visible;
  opacity: 1;
  transition-delay: 0s;
  pointer-events: auto;
}
   /* Visibilité contrôlée par JavaScript ou styles en ligne pour le moment */

/* Tente de supprimer les en-têtes et pieds de page du navigateur */
/* Cette règle doit être au niveau supérieur, pas dans @media print */
@page {
  margin: 0.5cm; /* Vous pouvez ajuster les marges de la page ici */
  @top-left { content: none; }
  @top-center { content: none; }
  @top-right { content: none; }
  @bottom-left { content: none; }
  @bottom-center { content: none; }
  @bottom-right { content: none; }
}

  .print-title {
    display: none; /* Caché par défaut en vue normale */
    /* Styles pour l'impression seront dans @media print */
  }

  /* Styles d'impression */
  @media print {
    body * {
      visibility: hidden !important; /* Cache tout par défaut */
      -webkit-print-color-adjust: exact !important; /* Forcer l'impression des couleurs pour tout ce qui sera visible */
      print-color-adjust: exact !important;
    }
  
    .print-title {
      display: block !important; /* Visible uniquement à l'impression */
      visibility: visible !important;
      text-align: center;
      font-size: 1.5em; /* Taille de police plus grande pour le titre */
      font-weight: bold;
      margin-bottom: 15px; /* Espace en dessous du titre */
    }

    .three-month-grid, .three-month-grid * {
      visibility: visible !important; /* Rend visible la grille et son contenu */
    }
  
    .three-month-grid {
      position: absolute !important;
      left: 0 !important;
      top: 0 !important;
      width: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      box-shadow: none !important;
      overflow: visible !important; /* S'assurer que rien n'est coupé */
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    .three-month-grid table,
    .three-month-grid th,
    .three-month-grid td,
    .three-month-grid .intervention-block-td, /* Cible les cellules d'intervention */
    .three-month-grid svg polygon { /* Cible les polygones des flèches SVG */
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  
    .print-hide, .print-hide * {
      display: none !important; /* Cache les éléments non désirés à l'impression */
      visibility: hidden !important;
    }

    .three-month-grid > svg {
      /* Forcer le SVG à s'aligner avec le tbody en mode impression */
      /* 84px est une estimation de la hauteur du thead. Ajustez si nécessaire. */
      /* Si les flèches sont toujours décalées, essayez d'ajuster cette valeur de 'top'. */
      top: 138px !important; /* 84px (thead) + ~39px (titre) */
      left: -20px !important; /* Ajusté à -20px selon votre confirmation */
      width: calc(100% + 20px) !important; /* Ajuster la largeur pour compenser le left négatif */
      height: calc(100% - 84px) !important; /* Occupe la hauteur du tbody */
    }
    }